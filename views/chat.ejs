<!DOCTYPE html>
<html ng-app="qaApp">
<head lang="en">

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="description" content="Harvard Website to ask questions in class"/>
    <meta name="author" content="Jovin Mwilanga"/>

    <title>HarvardClass</title>

    <!--google analytics-->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-58209445-1', 'auto');
        ga('send', 'pageview');

    </script>

    <!-- loads bootstrap.css -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

    <!--loads font awesome-->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- loads custom css file -->
    <link rel="stylesheet" href="css/chat.css">

</head>
<body ng-controller="MainController">

<!--start of nav-->

<!--the class static-top sticks nav bar at top, and fixed-top just fixes it at top-->
<div class="navbar navbar-inverse navbar-static-top">

    <!--'container' div makes sure our content is well centered on the screen-->
    <div class="container">
        <a href="/" class="navbar-brand"><span class="glyphicon glyphicon-book" aria-hidden="true"></span> ClassName</a>

        <!--button to target the navbar-right which will appear on collapse of navbar items-->
        <button class='navbar-toggle' data-toggle="collapse" data-target=".navHeaderCollapse">

            <!--create the breadcrumb-->
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>

        </button>

        <!--this navbar will be collapsed on mobile-->
        <div class="collapse navbar-collapse navHeaderCollapse">

            <ul class="nav navbar-nav navbar-right">
                <!--the user profile dropdown-->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        ID: <%= customUsername %> <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#"
                               class="logoutCustomChat"
                               ng-click="logoutCustomChat()">Logout from Session
                            </a>
                        </li>
                        <li>
                            <a href="#"
                               class="logoutHarvardChat"
                               ng-click="logoutHarvardChat()">Logout from Harvard
                            </a>
                        </li>
                    </ul>
                </li>

            </ul>
        </div>
    </div>
</div>
<!--end of nav-->


<!--middle container for news-feed, top voted questions and online users-->
<div class="container">

    <div class="row">

        <!--column for newsfeed-->
        <div class="col-lg-7 col-md-8 col-sm-8 col-xs-12" ng-controller="QuestionFeedController">
            <h5>
                <span>
                    <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                    Question Feed
                </span>
            </h5>
            <table class="table table-condensed question_feed ng-cloak">
                <tr ng-repeat="eachQuestion in questions"
                    ng-class="questionReference[eachQuestion.questionIndex].questionClass">
                    <td class='col-lg-1 col-md-1 col-sm-2 hidden-xs senderName'>
                        {{eachQuestion.senderName}}
                    </td>
                    <td class='col-lg-10 col-md-10 col-sm-9 col-xs-11'>
                        {{eachQuestion.question}}
                        <br/>
                        <small class="questionTime">
                            {{questionReference[eachQuestion.questionIndex].questionTime}}
                        </small>
                    </td>
                    <td class='col-lg-1 col-md-1 col-sm-1 col-xs-1' align='center'>
                        <button type='button'
                                ng-class="questionReference[eachQuestion.questionIndex].buttonClass"
                                ng-disabled="questionReference[eachQuestion.questionIndex].ifDisabled"
                                ng-click="upvote(eachQuestion.questionIndex, $event)">
                            <span class='glyphicon glyphicon-thumbs-up' aria-hidden='true'></span>
                        </button>
                    </td>
                </tr>
            </table>
        </div>
        <!--end of newsfeed-->

        <!--start of top voted questions and online column-->
        <div class="col-lg-5 col-md-4 col-sm-4 col-xs-12" ng-controller="TopVotedController">

            <div class="row">

                <!--start of top voted questions-->
                <div class="col-lg-9 col-md-12 col-sm-12 col-xs-9">
                    <h5><i class="fa fa-line-chart"></i>  Trending</h5>
                    <table class="table table-condensed topQuestions ng-cloak">
                        <tr ng-repeat="eachTop in topVotedQuestions"
                            ng-class="questionReference[eachTop.questionIndex].questionClass">
                            <td class='col-lg-11 col-md-11 col-sm-10 col-xs-10'>
                                {{eachTop.shortQuestion}}
                            </td>
                            <td class='col-lg-1 col-md-1 col-sm-2 col-xs-2' align='center'>
                                <button type="button" ng-class="questionReference[eachTop.questionIndex].buttonClass"
                                        ng-disabled="questionReference[eachTop.questionIndex].ifDisabled"
                                        ng-click="upvote(eachTop.questionIndex, $event)">
                                    <span class="voteNumber">{{eachTop.votes}}</span>
                                </button>
                            </td>
                        </tr>
                    </table>
                </div>
                <!--end of top voted questions-->

                <!--start of online users-->
                <div class="col-lg-3 col-md-5 col-sm-5 col-xs-3" style="text-align: center"
                     ng-controller="OnlineUsersController">

                    <h5><i class="fa fa-users"></i>  Users</h5>
                    <table class="table table-condensed onlineUsers ng-cloak">
                        <tr ng-repeat="(key, value) in onlineUsers">
                            <td class='onlineUser'><i class='fa fa-user'></i> {{value.customUsername}}</td>
                        </tr>
                    </table>
                </div>

            </div>

        </div>
        <!--end of online users column-->

    </div>
    <!--end of row-->

</div>
<!--end of mid container-->


<!--start of question input field-->
<!--<div class="container navbar-fixed-bottom">-->
<!--<div class="panel-footer" id="footerconst">-->
<div class='navbar navbar-default navbar-fixed-bottom' ng-controller="AskController">
    <div class="container">

        <form ng-submit="ask()" name="askForm">
            <textarea class="form-control"
                      id="qfield"
                      placeholder="Type your question"
                      rows="3"
                      ng-model="theQuestion"
                      required></textarea>

            <div class="pull-right">
                <button class="navbar-btn btn btn-align btn-info"
                        ng-disabled="askForm.$invalid">clarify?
                </button>
                <button class="navbar-btn btn btn-align btn-info"
                        ng-disabled="askForm.$invalid">give an example?
                </button>
                <button class="navbar-btn btn btn-warning" type="submit"
                        ng-disabled="askForm.$invalid">ASK
                </button>
            </div>
        </form>
    </div>
</div>
<!--end of question input field-->


<!-- JAVASCRIPT -->

<!-- socket.io javascript -->
<script type="text/javascript" src="socket.io/socket.io.js"></script>

<!-- jQuery -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<!--AngularJS script-->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular.min.js"></script>

<!-- Bootstrap.js -->
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>

<!-- loads respond.js: enables responsive web designs in browsers that don't support CSS3 Media Queries - in particular, Internet Explorer 8 and under. -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>

<script type="text/javascript" src="angular_assets/qaApp/mainApp.js"></script>
<script type="text/javascript" src="angular_assets/qaApp/services.js"></script>
<script type="text/javascript" src="angular_assets/qaApp/controllers.js"></script>
</body>
</html>