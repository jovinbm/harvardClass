<!DOCTYPE html>
<html ng-app="qaApp">
<head lang="en">

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <meta name="description" content="Harvard Website to ask questions in class"/>
    <meta name="author" content="Jovin Mwilanga"/>

    <title>HarvardClass</title>

    <!--google analytics-->
    <script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                    m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-58209445-1', 'auto');
        ga('send', 'pageview');

    </script>

    <!-- loads bootstrap.css -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

    <!--loads font awesome-->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- loads custom css file -->
    <link type="text/javascript" href="/bower_components/angular-loading-bar/build/loading-bar.css">
    <link rel="stylesheet" href="/public/css/chat.css">

</head>
<body ng-controller="MainController">

<!--start of nav-->
<div class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <!--button to target the navbar-right which will appear on collapse of navbar items-->
            <button type="button" class='navbar-toggle collapsed' data-toggle="collapse"
                    data-target=".navHeaderCollapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand"><span class="glyphicon glyphicon-book" aria-hidden="true"></span>
                HarvardClass
            </a>
        </div>

        <!--this navbar will be collapsed on mobile-->
        <div class="collapse navbar-collapse navHeaderCollapse">
            <ul class="nav navbar-nav navbar-right">
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <%= customUsername %> <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#"
                               class="logoutCustomChat"
                               ng-click="logoutCustomChat()">Logout from Session
                            </a>
                        </li>
                        <li>
                            <a href="#"
                               class="logoutHarvardChat"
                               ng-click="logoutHarvardChat()">Logout from Harvard
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
            <a type="button"
               class="btn btn-primary navbar-btn pull-right"
               href="#myModal"
               role="button"
               data-toggle="modal">
                <i class="fa fa-pencil"></i> Ask a Question
            </a>
        </div>
    </div>
</div>
<!--end of nav-->


<!--middle container for news-feed, top voted questions and online users-->
<div class="container">

    <div class="row">

        <!--column for newsfeed-->
        <div class="col-lg-7 col-md-8 col-sm-8 col-xs-12 ng-cloak" ng-controller="QuestionFeedController">
            <h5>
                <span>
                    <span class="glyphicon glyphicon-th-list" aria-hidden="true"></span>
                    Question Feed
                </span>
                <span class="hidden-sm hidden-md hidden-lg">
                    <button type="button" class="btn btn-primary btn-xs pull-right">
                        <a type="button"
                           class="btn btn-primary btn-xs"
                           href="#myModal"
                           role="button"
                           data-toggle="modal">
                            <i class="fa fa-pencil"></i> Ask a Question
                        </a>
                    </button></span>
            </h5>


            <div class="media" ng-repeat="eachQuestion in questions"
                 ng-class="questionReference[eachQuestion.questionIndex].questionClass">
                <a class="media-left media-top" href="#">
                    <p class="userName">{{eachQuestion.senderName}}</p>
                </a>

                <div class="media-body">
                    <h4 class="media-heading">{{eachQuestion.heading}}</h4>

                    <p ta-bind ng-model="eachQuestion.question"></p>

                    <small>{{questionReference[eachQuestion.questionIndex].questionTime}}</small>

                    <button type='button'
                            class="pull-right"
                            ng-class="questionReference[eachQuestion.questionIndex].buttonClass"
                            ng-disabled="questionReference[eachQuestion.questionIndex].ifDisabled"
                            ng-click="upvote(eachQuestion.questionIndex, $event)">

                        <span class='glyphicon glyphicon-thumbs-up' aria-hidden='true'></span>

                    </button>

                </div>

            </div>

        </div>
        <!--end of newsfeed-->

        <!--start of top voted questions and online column-->
        <div class="col-lg-5 col-md-4 col-sm-4 col-xs-12" ng-controller="TopVotedController">

            <div class="row">
                <!--start of top voted questions-->
                <div class="col-lg-9 col-md-12 col-sm-12 col-xs-9">
                    <h5><i class="fa fa-line-chart"></i> Trending</h5>
                    <ul class="list-group" id="trending">
                        <li class="list-group-item ng-cloak"
                            ng-repeat="eachTop in topVotedQuestions"
                            ng-class="[
                            questionReference[eachTop.questionIndex].questionClass,
                            questionReference[eachTop.questionIndex].listGroupClass
                            ]"
                            ng-disabled="questionReference[eachTop.questionIndex].ifDisabled"
                            ng-click="upvote(eachTop.questionIndex, $event)">
                            <span class="badge voteNumber">
                                {{eachTop.votes}}
                            </span>
                            {{eachTop.heading}}
                        </li>
                    </ul>
                </div>
                <!--end of top voted questions-->

                <!--start of online users-->
                <div class="col-lg-3 col-md-5 col-sm-5 col-xs-3" style="text-align: center"
                     ng-controller="OnlineUsersController">

                    <h5><i class="fa fa-users"></i> Users</h5>
                    <table class="table table-condensed ng-cloak" id="onlineUsers">
                        <tr ng-repeat="(key, value) in onlineUsers">
                            <td class='onlineUser userName'><i class='fa fa-user'></i> {{value.customUsername}}</td>
                        </tr>
                    </table>
                </div>
                <!--end of online users column-->

            </div>

        </div>
    </div>
    <!--end of row-->

</div>
<!--end of mid container-->


<!--start of bottom nav-->
<div class="nav navbar navbar-default navbar-fixed-bottom">
    <div class="container">
        <p class="navbar-text pull-left hidden-xs">
            <i class="fa fa-copyright"></i> 2015 harvardclass.herokuapp.com
        </p>
        <ul class="nav navbar-nav pull-right hidden-xs bottom-nav-pills">
            <li>
                <a href="#myModal"
                   data-toggle="modal">
                    <i class="fa fa-pencil"></i> Ask a Question
                </a>
            </li>
            <li>
                <a href="#trending">
                    <i class="fa fa-line-chart"></i> Trending
                </a>
            </li>
            <li>
                <a href="#onlineUsers"><i class="fa fa-users"></i> Users
                </a>
            </li>
        </ul>

        <ul class="nav nav-pills hidden-sm hidden-md hidden-lg bottom-nav-pills">
            <li>
                <a href="#myModal"
                   data-toggle="modal">
                    <i class="fa fa-pencil"></i> Ask a Question
                </a>
            </li>
            <li>
                <a href="#trending">
                    <i class="fa fa-line-chart"></i> Trending
                </a>
            </li>
            <li role="presentation">
                <a href="#onlineUsers"><i class="fa fa-users"></i> Users
                </a>
            </li>
        </ul>
    </div>
</div>
<!--end of bottom nav-->


<!--start of question input modal-->
<div id="myModal"
     class="modal fade"
     tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel"
     aria-hidden="true"
     ng-controller="AskController">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h3 id="myModalLabel">Ask a new question</h3>
            </div>

            <div class="modal-body">
                <form name="askForm">
                    <div class="form-group">
                        <label for="heading">Heading</label>
                        <input class="form-control"
                               id="heading"
                               placeholder="Please type a brief heading (10 to 50 chars)"
                               type="text"
                               ng-model="theHeading"
                               required
                               ng-minlength="10"
                               ng-maxlength="50">
                    </div>
                    <div class="form-group">
                        <div text-angular
                             ta-toolbar="[['p','pre','h5','h6'],['bold','italics','underline','quote'],['ul','ol','undo','redo','clear'],['justifyLeft','justifyRight','indent','outdent']]"
                             ng-model="theQuestion"
                             required
                             placeholder="Your question here"></div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button type="submit"
                        class="btn btn-warning pull-right"
                        ng-click="ask()"
                        ng-disabled="askForm.$invalid"
                        data-dismiss="modal">ASK
                </button>
                <button type="submit"
                        class="btn btn-info pull-right"
                        ng-disabled="askForm.$invalid"
                        data-dismiss="modal">clarify?
                </button>
            </div>
        </div>
    </div>
</div>
<!--end of question input modal-->


<!-- JAVASCRIPT -->

<!-- socket.io javascript -->
<script type="text/javascript" src="socket.io/socket.io.js"></script>

<!-- jQuery -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<!--AngularJS SCRIPTS-->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular.min.js"></script>
<script type="text/javascript"
        src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-animate.min.js"></script>
<script type="text/javascript"
        src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-sanitize.min.js"></script>


<!-- Bootstrap.js -->
<script type="text/javascript"
        src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>

<!-- loads respond.js: enables responsive web designs in browsers that don't support CSS3 Media Queries - in particular, Internet Explorer 8 and under. -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>

<!--text angular-->
<script src='//cdnjs.cloudflare.com/ajax/libs/textAngular/1.2.2/textAngular-sanitize.min.js'></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/textAngular/1.2.2/textAngular.min.js'></script>

<script type="text/javascript" src="/public/js/chat.js"></script>
<script type="text/javascript" src="/public/angular_assets/qaApp/mainApp.js"></script>
<script type="text/javascript" src="/public/angular_assets/qaApp/services.js"></script>
<script type="text/javascript" src="/public/angular_assets/qaApp/controllers.js"></script>
</body>
</html>